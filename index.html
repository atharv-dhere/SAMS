<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAMS | Student Academic Monitor System</title>
    <style>
        :root {
            --primary: #6366f1; --accent: #8b5cf6; --bg: #0f172a;
            --card-bg: #1e293b; --text-main: #f8fafc; --text-dim: #94a3b8;
            --border: #334155; --success: #10b981; --danger: #ef4444;
        }

        .light-mode {
            --bg: #f1f5f9; --card-bg: #ffffff; --text-main: #0f172a;
            --text-dim: #475569; --border: #cbd5e1;
        }

        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text-main); margin: 0; display: flex; min-height: 100vh; transition: 0.3s; }
        .hidden { display: none !important; }

        /* Login Screen */
        #login-container { 
            width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; 
            background: radial-gradient(circle at center, #1e1b4b, #0f172a); position: fixed; z-index: 1000;
        }
        .login-box {
            background: var(--card-bg); padding: 3rem; border-radius: 24px; border: 1px solid var(--border);
            width: 360px; text-align: center; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }
        input, select { width: 100%; padding: 12px; margin: 10px 0; background: #0f172a; border: 1px solid var(--border); border-radius: 8px; color: white; box-sizing: border-box; }
        .light-mode input, .light-mode select { background: #f8fafc; color: #0f172a; }
        
        button { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: 0.3s; margin: 5px 0; }
        button:hover { background: var(--accent); transform: translateY(-1px); }

        /* Dashboard Layout */
        #main-dashboard { display: grid; grid-template-columns: 280px 1fr; width: 100%; }
        .sidebar { background: var(--card-bg); border-right: 1px solid var(--border); padding: 2rem; display: flex; flex-direction: column; height: 100vh; position: sticky; top: 0; }
        .main-content { padding: 2rem; overflow-y: auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1.5rem; }
        .card { background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 4px 6px rgba(0,0,0,0.2); margin-bottom: 1rem; }
        
        .timer-display { font-size: 2.5rem; font-weight: 800; text-align: center; margin: 10px 0; font-family: monospace; color: var(--success); }
        .list-item { background: rgba(0,0,0,0.1); padding: 10px; border-radius: 6px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; border-left: 3px solid var(--primary); }
    </style>
</head>
<body>

    <div id="login-container">
        <div class="login-box">
            <h1 style="color: white; margin: 0; font-size: 2.5rem;">SAMS</h1>
            <p style="color: var(--text-dim); margin-bottom: 2rem; font-size: 0.8rem;">BY AD (ATHARV DHERE)</p>
            
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button onclick="login()">Enter System</button>
            <p id="login-error" style="color: var(--danger); font-size: 0.8rem; margin-top: 15px;"></p>
            
            <div style="margin-top: 2.5rem; border-top: 1px solid var(--border); padding-top: 1rem;">
                <p style="color: var(--text-dim); font-size: 0.7rem; letter-spacing: 0.5px;">
                    Developed by <br>
                    <b style="color: var(--primary); font-size: 0.8rem;">Atharv Dhere X Gemini</b>
                </p>
            </div>
        </div>
    </div>

    <div id="main-dashboard" class="hidden">
        <aside class="sidebar">
            <h1 id="user-display" style="font-size: 1.4rem; margin-bottom: 0;">User</h1>
            <p style="color: var(--primary); font-size: 0.7rem; font-weight: bold; margin-bottom: 2rem;">SAMS PRO v4.0</p>
            
            <button onclick="toggleTheme()" style="background:#475569; font-size:0.7rem;">üåì Switch Theme</button>
            <button onclick="exportData()" style="background:var(--success); font-size:0.7rem;">üíæ Backup Data</button>

            <div class="card" style="background: rgba(0,0,0,0.1); border: none; padding: 1rem; margin-top:1rem;">
                <h2 style="font-size:0.7rem; color:var(--accent);">‚è± FOCUS</h2>
                <div class="timer-display" id="timer">25:00</div>
                <div style="display:flex; gap:5px;">
                    <button onclick="startTimer()" style="background: var(--success); padding: 5px; font-size:0.7rem;">Start</button>
                    <button onclick="resetTimer()" style="background: var(--danger); padding: 5px; font-size:0.7rem;">Reset</button>
                </div>
            </div>

            <button onclick="logout()" style="background:none; border:1px solid var(--danger); color:var(--danger); margin-top:auto;">Logout</button>
        </aside>

        <main class="main-content">
            <div class="grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <h2 style="font-size:0.9rem;">üìà 80% Attendance Logic</h2>
                    <div id="attendance-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;"></div>
                </div>

                <div class="card">
                    <h2>üéì SGPA Calculator</h2>
                    <div id="gpa-inputs">
                        <input type="number" id="gpa-points" placeholder="Total Grade Points">
                        <input type="number" id="gpa-credits" placeholder="Total Credits">
                        <button onclick="calcGPA()">Calculate SGPA</button>
                        <h3 id="gpa-result" style="text-align:center; color:var(--primary);">---</h3>
                    </div>
                </div>

                <div class="card">
                    <h2>üí∞ Finance</h2>
                    <input type="text" id="exp-name" placeholder="Item">
                    <input type="number" id="exp-amt" placeholder="‚Çπ">
                    <button onclick="addExpense()">Add Transaction</button>
                    <div id="expense-list" style="margin-top:10px; max-height:200px; overflow-y:auto;"></div>
                </div>

                <div class="card">
                    <h2>‚úÖ Task Reminders</h2>
                    <input type="text" id="todo-input" placeholder="New task...">
                    <button onclick="addTask()">Add Task</button>
                    <div id="todo-list" style="margin-top:10px;"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const users = {
            "Atharv Dhere": ["1262250205", "1262250204"],
            "Aryan Lole": "1262253709",
            "Pavan Dhulipala": "1262252556",
            "Shubham Rathor": "1262252788",
            "Aditya Desai": "1262252456"
        };

        const subjects = ["Engineering Mechanics", "Electrical Engineering", "Chemistry", "AI Everyone", "Peace", "IKS", "Calculus"];
        let currentUser = "";
        let timerInterval;
        let timeLeft = 1500;

        function login() {
            const u = document.getElementById('username').value;
            const p = document.getElementById('password').value;
            const valid = Array.isArray(users[u]) ? users[u].includes(p) : users[u] === p;

            if(valid) {
                currentUser = u;
                document.getElementById('login-container').classList.add('hidden');
                document.getElementById('main-dashboard').classList.remove('hidden');
                document.getElementById('user-display').innerText = u;
                init();
            } else {
                document.getElementById('login-error').innerText = "Invalid Credentials";
            }
        }

        function init() {
            const attGrid = document.getElementById('attendance-grid');
            attGrid.innerHTML = '';
            subjects.forEach(sub => {
                const id = sub.replace(/\s/g,'');
                const saved = JSON.parse(localStorage.getItem(`${currentUser}_${id}`)) || {p:0, t:0};
                const perc = saved.t > 0 ? ((saved.p/saved.t)*100).toFixed(1) : 0;
                
                attGrid.innerHTML += `
                    <div class="card" style="background:rgba(0,0,0,0.2); margin:0;">
                        <b>${sub}</b>
                        <div style="font-size:1.5rem; color:var(--primary); margin:5px 0;">${perc}%</div>
                        <div style="font-size:0.7rem; color:var(--text-dim);">P: ${saved.p} | T: ${saved.t}</div>
                        <div style="display:flex; gap:5px; margin-top:10px;">
                            <button onclick="updateAtt('${sub}',true)" style="background:var(--success); padding:5px; font-size:0.7rem;">P</button>
                            <button onclick="updateAtt('${sub}',false)" style="background:var(--danger); padding:5px; font-size:0.7rem;">A</button>
                        </div>
                    </div>`;
            });
            loadTasks(); loadExpenses();
        }

        function updateAtt(sub, isP) {
            const id = sub.replace(/\s/g,'');
            let data = JSON.parse(localStorage.getItem(`${currentUser}_${id}`)) || {p:0, t:0};
            if(isP) data.p++;
            data.t++;
            localStorage.setItem(`${currentUser}_${id}`, JSON.stringify(data));
            init();
        }

        function calcGPA() {
            const p = document.getElementById('gpa-points').value;
            const c = document.getElementById('gpa-credits').value;
            if(p && c) document.getElementById('gpa-result').innerText = `SGPA: ${(p/c).toFixed(2)}`;
        }

        function addExpense() {
            const n = document.getElementById('exp-name').value;
            const a = document.getElementById('exp-amt').value;
            if(!n || !a) return;
            let exps = JSON.parse(localStorage.getItem(`${currentUser}_exps`)) || [];
            exps.push({n, a});
            localStorage.setItem(`${currentUser}_exps`, JSON.stringify(exps));
            loadExpenses();
        }

        function loadExpenses() {
            const list = document.getElementById('expense-list');
            list.innerHTML = '';
            let exps = JSON.parse(localStorage.getItem(`${currentUser}_exps`)) || [];
            exps.reverse().forEach(e => {
                list.innerHTML += `<div class="list-item"><span>${e.n}</span><b>‚Çπ${e.a}</b></div>`;
            });
        }

        function addTask() {
            const v = document.getElementById('todo-input').value;
            if(!v) return;
            let tasks = JSON.parse(localStorage.getItem(`${currentUser}_tasks`)) || [];
            tasks.push(v);
            localStorage.setItem(`${currentUser}_tasks`, JSON.stringify(tasks));
            loadTasks();
            document.getElementById('todo-input').value = '';
        }

        function loadTasks() {
            const list = document.getElementById('todo-list');
            list.innerHTML = '';
            let tasks = JSON.parse(localStorage.getItem(`${currentUser}_tasks`)) || [];
            tasks.forEach((t, i) => {
                list.innerHTML += `<div class="list-item"><span>${t}</span><span onclick="removeTask(${i})" style="color:var(--danger); cursor:pointer;">√ó</span></div>`;
            });
        }

        function removeTask(i) {
            let tasks = JSON.parse(localStorage.getItem(`${currentUser}_tasks`));
            tasks.splice(i, 1);
            localStorage.setItem(`${currentUser}_tasks`, JSON.stringify(tasks));
            loadTasks();
        }

        function toggleTheme() { document.body.classList.toggle('light-mode'); }

        function exportData() {
            const data = JSON.stringify(localStorage);
            const blob = new Blob([data], {type: 'text/plain'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `SAMS_Backup_${currentUser}.txt`;
            a.click();
        }

        function startTimer() { if(!timerInterval) timerInterval = setInterval(() => { timeLeft--; updateTimer(); if(timeLeft<=0) resetTimer(); }, 1000); }
        function resetTimer() { clearInterval(timerInterval); timerInterval = null; timeLeft = 1500; updateTimer(); }
        function updateTimer() {
            const m = Math.floor(timeLeft/60); const s = timeLeft%60;
            document.getElementById('timer').innerText = `${m}:${s<10?'0'+s:s}`;
        }
        function logout() { location.reload(); }
    </script>
</body>
</html>

